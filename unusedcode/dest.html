<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkbox Form</title>
  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <h2>Выберите параметры:</h2>
    <div class="row">
      <div class="col-md">
        <h3>Первые 4 параметра:</h3>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="an" id="an" name="d">
          <label class="form-check-label" for="an">an</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="sn" id="sn" name="d">
          <label class="form-check-label" for="sn">sn</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="mn" id="mn" name="d">
          <label class="form-check-label" for="mn">mn</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="dn" id="dn" name="d">
          <label class="form-check-label" for="dn">dn</label>
        </div>
      </div>
      <div class="col-md">
        <h3>Остальные параметры:</h3>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="kn" id="kn">
          <label class="form-check-label" for="kn">kn</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="lt" id="lt">
          <label class="form-check-label" for="lt">lt</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="vn" id="vn">
          <label class="form-check-label" for="vn">vn</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="kp" id="kp">
          <label class="form-check-label" for="kp">kp</label>
        </div>
      </div>
    </div>
    
    <!-- Ваша форма -->
    <form action="/s.php" method="GET">
      <div class="my-3 form-group input-group ui-widget dropup rounded-pill">
        <label class="sr-only dropup rounded-pill" for="paliauto"></label>
        <div class="searchinputdiv">      
          <input name="s" type="search" class="form-control rounded-pill searchinput " id="paliauto" placeholder="e.g. Kāyagat or sn56.11"  multiple>
        </div>

        <div class="input-group-append ms-2">
          <button onclick="document.getElementById( 'spinner' ).style.display = 'block'" type="submit" id="searchbtn" class="btn searchbutton btn-primary mainbutton ms-1 me-1 rounded-pill">
            Search</button>
          <button onclick="document.getElementById( 'spinner' ).style.display = 'block'" type="submit" id="searchbtn-icon" class="btn searchbutton btn-primary mainbutton ms-1 me-1 rounded-pill">
            <i class="fas fa-search fa-flip-horizontal" aria-hidden="true"></i> 
          </button>
        </div>  
      </div>
    </form>
    
    <div class="justify-content-center text-center">
      <div id="spinner" style="display: none;" >
        <div class="spinner-border mt-3" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>     
    </div>             

<script>
  document.getElementById('paliauto').addEventListener('change', function() {
    this.value = this.value.trim();
  });

  // Измененный JavaScript-код для добавления значений выбранных чекбоксов к параметру `d`
  document.querySelector('form').addEventListener('submit', function(event) {
    event.preventDefault(); // Отменяем отправку формы, чтобы проверить значения перед отправкой
    var checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
    var selectedValues = [];
    checkboxes.forEach(function(checkbox) {
      selectedValues.push(checkbox.value);
    });

    // Добавляем значения выбранных чекбоксов к параметру `d`
    document.querySelector('input[name="d"]').value = selectedValues.join(',');

    console.log('Selected values:', selectedValues);
    this.submit(); // Отправляем форму после логирования значений
  });
</script>

    <script src="/assets/js/smoothScroll.js" defer></script>
    <script defer>
      window.addEventListener('pageshow', function(event) {
        if (event.persisted) {
          // Скрываем спиннер
          document.getElementById('spinner').style.display = 'none';
        }
      });
    </script>           
  </div>
</body>
</html>
